<div class="content-container">
  <div class="container">
    <main>
      <chef-breadcrumbs>
        <chef-breadcrumb [link]="['/settings/data-feeds']">Data Feed</chef-breadcrumb>
        {{ destination?.name }}
      </chef-breadcrumbs>
      <chef-page-header>
        <chef-heading class="btn-alignleft">
          {{ destination?.name }}
          <div class="btn-alignright">
            <label for="enableDatafeed" class="btn-data-feed btn-Enable">Enable</label>
            <label for="disableDatafeed" class="btn-data-feed btn-Disable">Disable</label>
            <label for="deleteDatafeed" class="btn-data-feed btn-Delete">Delete</label>
          </div>
        </chef-heading>
        <div class="details-border">
          <table>
            <thead>
              <tr class="detail-row">
                <th class="header-column">SERVICE</th>
                <th class="header-column">INTEGRATION TYPE</th>
              </tr>
            </thead>
            <tbody>
              <tr class="detail-row">
                <td class="header-column">Servicenow</td>
                <td class="header-column">Webhook</td>
              </tr>
            </tbody>
          </table>
        </div>
        <chef-tab-selector [value]="tabValue">
          <chef-option value='details'>Details</chef-option>
        </chef-tab-selector>
      </chef-page-header>
      <section class="page-body alignleft">
        <form [formGroup]="updateForm">
          <chef-form-field>
            <label for="name">Name <span aria-hidden="true">*</span></label>
            <input chefInput id="name" formControlName="name" type="text" [resetOrigin]="saveSuccessful" autocomplete="off" data-cy="name-input"/>
            <chef-error *ngIf="(nameCtrl.hasError('required') || nameCtrl.hasError('pattern')) && nameCtrl.dirty">
              Name is required.
            </chef-error>
          </chef-form-field>
          <chef-form-field>
            <label for="url">Data Feed URL <span aria-hidden="true">*</span></label>
            <input chefInput id="url" formControlName="url" type="text" [resetOrigin]="saveSuccessful" autocomplete="off" data-cy="url-input"/>
            <chef-error *ngIf="(urlCtrl.hasError('required') || urlCtrl.hasError('pattern')) && urlCtrl.dirty">
              Data Feed URL is required.
            </chef-error>
          </chef-form-field>
        </form>
          <chef-button primary [disabled]="testInProgress" (click)="sendTestForDataFeedUrl()" class="alignright">
            <chef-loading-spinner *ngIf="testInProgress"></chef-loading-spinner>
            <span *ngIf="testInProgress">Testing...</span>
            <span *ngIf="!testInProgress">Test Data Feed</span>
          </chef-button>
          <br>
          <hr>
          <chef-button tertiary class="alignright">
            <!-- <chef-loading-spinner *ngIf="saveInProgress"></chef-loading-spinner> -->
            <!-- <span *ngIf="saveInProgress">Saving...</span> -->
            <span >Cancel</span>
          </chef-button>
          <chef-button primary [disabled]="saveInProgress || !updateForm.valid || !updateForm.dirty" (click)="saveDataFeed()" class="alignright">
            <chef-loading-spinner *ngIf="saveInProgress"></chef-loading-spinner>
            <span *ngIf="saveInProgress">Saving...</span>
            <span *ngIf="!saveInProgress">Save</span>
          </chef-button>
      </section>
      <section class="page-body alignright config-details">
        <chef-card>
          <app-data-feed-config-details>
          </app-data-feed-config-details>
        </chef-card>
      </section>
    </main>
  </div>
</div>
